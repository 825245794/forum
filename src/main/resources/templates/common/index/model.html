<div class="modal fade-in-animation" id="friend_modal" data-backdrop="static" style="position: fixed;">
    <div class="modal-dialog modal-md" >
        <div class="modal-content" style="background-image: url(images/iceland.jpg); -moz-background-size:100% 100%;background-size:100% 100%; background-repeat:no-repeat;">
            <div class="modal-header">
                <h4 class="modal-title"></h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body modal-body-scroller" >
                <div class="boq" >
                    <div class="by">
                        <div class="bor">
                            <img class="us bos" id="friend_model_img" src="images/no_user_image.png">.
                            <h3 class="bou" id="friend_model_nickname"></h3>
                            <!--<p class="bot">-->

                            <!--</p>-->
                        </div>
                    </div>

                </div>
            </div>
            <div class="modal-body modal-body-scroller opacity-60per" style="background-color:white;" id="friend_model_info">

            </div>
            <div class="modal-footer text-align-center opacity-60per" >
                <Shiro:user>
                <button type="button" class="btn btn-primary"><span
                        class="fa fa-circle-o width-auto height-auto fa-1x friend-button"></span>
                </button>
                </Shiro:user>
                <Shiro:guest>
                <button type="button" class="btn btn-primary" data-toggle="popover" data-content="请先登录后再添加好友" data-placement="top"  data-container="body"><span
                        class="fa fa-circle-o width-auto height-auto fa-1x friend-button"></span>
                </button>
                </Shiro:guest>
                <button type="button" class="btn btn-secondary btn-danger" data-dismiss="modal"><span
                        class="fa fa-close width-auto height-auto fa-1x friend-button"></span>
                </button>
            </div>
        </div>
    </div>
</div>

<script>
    $('#friend_modal').on('show.bs.modal', function (event) {
        var dom = $("friend_modal");
        var width = dom.outerWidth(),
            height = dom.outerHeight(),
            $window = $(window),
            bodyWidth = $window.width(),
            bodyHeight = $window.height(),
            scrollTop = $window.scrollTop();
        $("#friend_modal").css({
            top: (bodyHeight / 2 - height / 2) / 3 * 2 + scrollTop,
            left: bodyWidth / 2 - width / 2,
            position: 'fixed'
        });
        var button = $(event.relatedTarget)
        var sid = button.data('sid')
        $.ajax({
            type:"POST",
            url:"/user/user-info",
            dataType:"json",
            timeout : 50000,
            data: { sid:sid},
            success:function(data){
                if(data.hasOwnProperty("msg")){
                    userPageAlert('',  data.msg.msgInfo);
                    return;
                }
                var img = isEmpty(data.userImg) == true ?'images/no_user_image.png':data.userImg;
                var text = "性别："+(data.sex == '1'?'男':'女')+"<br>"
                text += "城市："+data.province+data.city+data.dist+"<br>"
                $("#friend_model_img").attr('src',img);
                $("#friend_model_info").html(text);
                $("#friend_model_nickname").text(data.nickname);
            },
            complete: function (XMLHttpRequest, textStatus) {
                if(textStatus == 'timeout') {
                    userPageAlert('',  '连接超时，请稍后再试')
                }
            },
            error:function(jqXHR){
                userPageAlert('',  '服务器繁忙，请稍后再试')
            }
        });
    });
</script>